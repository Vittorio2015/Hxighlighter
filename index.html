<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="UTF-8">
		<!-- Each page should have its own title -->
        <title>HxAT v2 | Text Annotation </title>

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- This currently uses bootstrap so as to work with summernote -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

        <!-- Font Awesome Icons are used throughout -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- custom css for HXAT outside of the annotator stuff that is already inlined in js -->
        <link href='./src/css/hx-annotator.css' rel="stylesheet" type="text/css">
        <link href='./src/css/summernote.css' rel="stylesheet" type="text/css">
        <link href='./src/css/summernote-bs4.css' rel="stylesheet" type="text/css">
        <link href='./src/css/summernote-richtext-annotator.css' rel="stylesheet" type="text/css">
        <link href='./src/css/token-input.css' rel="stylesheet" type="text/css">
        <link href='./src/css/jquery-confirm.min.css' rel="stylesheet" type="text/css">
	</head>
	<body>
		<div class="hxighlighter-container">

		</div>

		<!-- you need jQuery and very very slimmed-down version of annotator-->
        <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous" type="text/javascript"></script>

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

        <!-- Load vendor JS files -->
        <script type="text/javascript" src="./src/vendor/Annotator/annotator.ui.js"></script>

        <!-- pubsub is very lightweight and used for event-based interactions-->
        <script type="text/javascript" src="./src/vendor/ba-tiny-pubsub.js"></script>

        <!-- collection of functions used throughout the annotation tools -->
        <script type="text/javascript" src="./src/hxelper-functions.js"></script>
        <script type="text/javascript" src="./src/vendor/ui/underscore.js"></script>
        <script type="text/javascript" src="./src/vendor/ui/jquery-confirm.min.js"></script>

        <script src="./src/hxighlighter.js" type="text/javascript"></script>
        <script src="./src/targetcontroller.js" type="text/javascript"></script>
        <script src="./src/core.js" type="text/javascript"></script>
        <script src="./src/viewers/floatingviewer.js" type="text/javascript"></script>
        <script src="./src/viewers/sidebar.js" type="text/javascript"></script>
        <script src="./src/storage/local.js" type="text/javascript"></script>
        <script src="./src/storage/catchpy.js" type="text/javascript"></script>

        <!-- Plugins -->
        <script type="text/javascript" src="./src/vendor/ui/summernote.js"></script>
        <script type="text/javascript" src="./src/vendor/annotation-plugins/summernote-richtext-plugin.js"></script>
        <script type="text/javascript" src="./src/vendor/ui/jquery.tokeninput.js"></script>
        <script type="text/javascript" src="./src/vendor/annotation-plugins/colored-token-tags-plugin.js"></script>

        <script>
        	var hxighlighter_object1 = {
        		"commonInfo": {
	        		"mediaType": "text",
	        		"context_id": "fake-course-id",
	        		"collection_id": "e-a-poe-section",
	        		"object_id": "the-raven-id",
	        		"username": "lduarte1991",
	        		"user_id": "fake-anonymous-id",
	        		"object_source": "http://localhost:8000/Hxighlighter/sample_targets/raven.txt",
	        	},
	      		"targetOptions": {
	      			"method": 'url', // url - ajax to retrieve, html - already loaded in page
	      			"target_selector": '.hxighlighter-container',
	      		},
	      		"coreOptions": {
	      			"viewers": ['floating', 'sidebar'],
	      			"plugins": {
	      				'SummernoteRichText': {},
	      				'ColoredTokenTags': {
	      					hasColors: true,
	      					tags: "tag1:red,tag2:blue"
	      				}
	      			},
	      			"storageOptions": {
	      				"backend": ['catchpy', 'backup', 'local'],
	      				"deleteAfterBackup": true,
	      				"exportButtonSelector": '.export-temporary',
                        "external_url": {
                            'catchpy': 'https://catchpy.harvardx.harvard.edu/annos'
                        }
	      			},
	      			"default_editor": 'floating',
	      			"should_highlight": true,
	      			"template_urls": 'http://localhost:8000/Hxighlighter/src/viewers/templates/',
	      		}
        	};

        	var hxighlighter_object2 = {
        		"commonInfo": {
	        		"mediaType": "text",
	        		"context_id": "fake-course-id",
	        		"collection_id": "e-a-poe-section",
	        		"object_id": "the-cask-id",
	        		"username": "lduarte1991",
	        		"user_id": "fake-anonymous-id",
	        		"object_source": "http://localhost:8000/Hxighlighter/sample_targets/cask.txt",
	        	},
	      		"targetOptions": {
	      			"method": 'url', // url - ajax to retrieve, html - already loaded in page
	      			"target_selector": '.hxighlighter-container',
	      		}
        	};

        	Hxighlighter(hxighlighter_object1);
        	Hxighlighter(hxighlighter_object2);
        </script>
	</body>
</html>